<launch>

    <arg name="name_space" default="robot_1"/>
    <arg name="vehicleX" default="0"/>
    <arg name="vehicleY" default="0"/>

    <arg name="checkTerrainConn" default="false"/>

    <arg name="sensorOffsetX" default="0"/>
    <arg name="sensorOffsetY" default="0"/>
    <arg name="vehicleHeight" default="0.75"/>
    <arg name="cameraOffsetZ" default="0"/>
  
    <arg name="terrainVoxelSize" default="0.05"/>
    <arg name="groundHeightThre" default="0.1"/>
    <arg name="adjustZ" default="true"/>
    <arg name="terrainRadiusZ" default="1.0"/>
    <arg name="minTerrainPointNumZ" default="5"/>
    <arg name="smoothRateZ" default="0.5"/>
    <arg name="adjustIncl" default="true"/>
    <arg name="terrainRadiusIncl" default="2.0"/>
    <arg name="minTerrainPointNumIncl" default="200"/>
    <arg name="smoothRateIncl" default="0.5"/>
    <arg name="InclFittingThre" default="0.2"/>
    <arg name="maxIncl" default="30.0"/>


    <!-- Launch the first robot (robot1) with its namespace -->
    <group ns="$(arg name_space)">
        <node pkg="vehicle_simulator" type="pub_registered_scan" name="pub_registered_scan" output="screen" required="true">
            <param name="name_space" value="$(arg name_space)" />
      
            <param name="use_gazebo_time" type="bool" value="false" />
      
            <param name="sensorOffsetX" value="$(arg sensorOffsetX)" />
            <param name="sensorOffsetY" value="$(arg sensorOffsetY)" />
            <param name="vehicleHeight" value="$(arg vehicleHeight)" />
            <param name="cameraOffsetZ" value="$(arg cameraOffsetZ)" />
            <param name="terrainVoxelSize" value="$(arg terrainVoxelSize)" />
            <param name="groundHeightThre" value="$(arg groundHeightThre)" />
            <param name="adjustZ" value="$(arg adjustZ)" />
            <param name="terrainRadiusZ" value="$(arg terrainRadiusZ)" />
            <param name="minTerrainPointNumZ" value="$(arg minTerrainPointNumZ)" />
            <param name="smoothRateZ" value="$(arg smoothRateZ)" />
            <param name="adjustIncl" value="$(arg adjustIncl)" />
            <param name="terrainRadiusIncl" value="$(arg terrainRadiusIncl)" />
            <param name="minTerrainPointNumIncl" value="$(arg minTerrainPointNumIncl)" />
            <param name="smoothRateIncl" value="$(arg smoothRateIncl)" />
            <param name="InclFittingThre" value="$(arg InclFittingThre)" />
            <param name="maxIncl" value="$(arg maxIncl)" />
        </node>
    
        <include file="$(find local_planner)/launch/local_planner.launch" >
            <arg name="name_space" value="$(arg name_space)"/>
            <arg name="cameraOffsetZ" value="$(arg cameraOffsetZ)"/>
            <arg name="goalX" value="$(arg vehicleX)"/>
            <arg name="goalY" value="$(arg vehicleY)"/>
        </include>
    
        <include file="$(find terrain_analysis)/launch/terrain_analysis.launch" />
    
        <include file="$(find terrain_analysis_ext)/launch/terrain_analysis_ext.launch" >
            <arg name="checkTerrainConn" value="$(arg checkTerrainConn)"/>
        </include>

        <include file="$(find ps3joy)/launch/ps3.launch" />

        <node launch-prefix="nice" pkg="rviz" type="rviz" name="rvizGA" args="-d $(find vehicle_simulator)/rviz/vehicle_simulator.rviz" respawn="true"/>
    </group>


</launch>
  